(function(e,t,n,r,i){var s={},o=function(t){return e.Function("return "+t)()},u=e.document,a,f=function(t,i){var o={exports:{}};s[t]=1,n[t]=o.exports;if(!i)i=i||e[t];else if(typeof i=="function"){var u=l;r[t]&&r[t].sandbox&&typeof u=="function"&&(u=a),i=i(u,o.exports,o)||o.exports}return i=i,n[t]=i},l=function(e){var t=n[e],r=[e,t];return r&&(e=r[0],t=r[1]),s[e]&&t?t:(typeof t=="string"&&t.indexOf("(function(")===0&&(t=o(t)),f(e,t))},c={exports:{}};for(var h in n)s[h]=0;t(l,c.exports,c)})(this,function(e,t,n){function r(e){var t=document.createElement("div"),n=new dhtmlXGridObject(t);return t.classList.add("multi_checkbox"),e.container.appendChild(t),n.setIconsPath(dhtmlx.image_path),n.setImagePath(dhtmlx.image_path),n.setHeader(","+e.name||e.property.Заголовок||e.property.name),n.setInitWidths("30,*"),n.setColAlign("center,left"),n.setColSorting("na,na"),n.setColTypes("ch,ro"),n.setColumnIds("ch,name"),n.enableAutoWidth(!0,600,100),n.enableAutoHeight(!0,180,!0),n.init(),e.values?e.values.forEach(function(e){n.addRow(e.ref,[0,e.name])}):e.property.type.is_ref&&e.property.type.types&&e.property.type.types.length==1&&$p.md.mgr_by_class_name(e.property.type.types[0]).find_rows({owner:e.property},function(e){n.addRow(e.ref,[0,e.name])}),n}function i(e){function t(){noUiSlider.create(o,{start:[e.start?e.start.min:100,e.start?e.start.max:1e4],step:e.step||100,margin:e.margin||100,connect:!0,behaviour:"tap-drag",range:{min:e.range?e.range.min:200,max:e.range?e.range.max:1e4}}),o.noUiSlider.on("update",function(e,t){t?a.value=e[t]:u.value=e[t],n()})}function n(){var t={};t[e.name]=[parseInt(u.value)||0,parseInt(a.value)||1e5],e.on_change(t)}function r(){o.noUiSlider.set([u.value,a.value]),n()}var i=document.createElement("div"),s=document.createElement("div"),o=document.createElement("div"),u,a;return e.container.appendChild(i),i.appendChild(s),s.style.marginBottom="12px",s.innerHTML=e.synonym+": <input name='min' /> - <input name='max' />",u=s.querySelector("[name=min]"),a=s.querySelector("[name=max]"),u.style.width="33%",a.style.width="33%",i.appendChild(o),t(),u.addEventListener("change",r),a.addEventListener("change",r),o.rebuild=function(n){n.range&&(e.range=n.range),n.start&&(e.start=n.start),o.noUiSlider.destroy(),t()},o}function s(e){function t(){r||(e.innerHTML='<p class="text">Пока нет ни одного комментария, ваш будет первым</p>',r=!0)}var n,r;t(),dhx4.attachEvent("socket_msg",function(t){if(!t||!t.rows||t.type!="opinion")return;t.rows.forEach(function(t){t.model==n&&(r&&(e.innerHTML="",r=!1),t.opinion.forEach(function(t){e.innerHTML+='<p class="text">'+t.pro+"</p>"}))})}),this.__define({model:{get:function(){return n},set:function(e){if(n==e)return;n=e,t(),n&&$p.eve.socket.send({type:"opinion",model:n})}}})}dhtmlXCellObject.prototype.attachPropFilter=function(e,t){function n(e){var t;for(var n in e){if(!f[n])t=!0;else if(typeof e[n]=="object")for(var r in e[n])f[n][r]!=e[n][r]&&(t=!0);f[n]=e[n]}t&&dhx4.callEvent("filter_prop_change",[f])}t||(t={});var s=this,o=s.getWidth?s.getWidth():s.cell.offsetWidth-44,u,a,f={},l,c=$p.job_prm.parse_url(),h=new function(){this.children=[],this.form=s.attachForm([{type:"settings",labelWidth:120,inputWidth:120,offsetLeft:dhtmlx.skin=="dhx_web"?4:8,offsetTop:8},{type:"container",name:"price",label:"",inputWidth:o,inputHeight:50,position:"label-top"},{type:"checkbox",name:"store",label:"Есть на складе",labelAlign:"left",position:"label-right",tooltip:"Скрыть тованы, которых нет в наличии"},{type:"container",name:"_add",label:"Дополнительно",inputWidth:o,inputHeight:"auto",position:"label-top"},{type:"template",name:"form_template_3",label:"Показать"},{type:"template",name:"form_template_1",label:"Больше параметров"}])};return u=h.form.getContainer("_add"),h.__define({mode:{get:function(){},set:function(e){},enumerable:!1},parent:{get:function(){return l?l.ref:""},set:function(t){var s,o={container:h.form.getContainer("price"),on_change:n,name:"Цена",synonym:"Цена",range:{min:0,max:1e6},start:{min:100,max:1e5}};h.children.forEach(function(e){e.destructor&&e.destructor()});while(s=u.lastChild)u.removeChild(s);f={};if(t==$p.blank.guid){a?(o.range.min=0,o.range.max=1e6,o.start.min=100,o.start.max=1e5,a.rebuild(o)):a=new i(o);return}l=e.get(t),o.range.min=l.Цена_Мин>500?l.Цена_Мин-500:0,o.range.max=l.Цена_Макс+500,o.start.min=l.Цена_Мин,o.start.max=l.Цена_Макс,a?a.rebuild(o):a=new i(o);if(l.Производители){var c=l.Производители.split(",");c.length>1&&(s=new r({container:u,property:{},name:"Производители",values:c.map(function(e){return $p.cat.Производители.get(e)})}),h.children.push(s))}l.РеквизитыБыстрогоОтбораНоменклатуры.each(function(e){e.property&&!e.property.empty()&&(s=new r({container:u,property:e.property,name:e.ПредставлениеРеквизита}),h.children.push(s))})},enumerable:!1},hash_route:{value:function(e){e.obj&&h.parent!=e.obj&&(h.parent=e.obj)}}}),$p.eve.hash_route.push(h.hash_route),setTimeout(function(){h.hash_route(c)},50),h},dhtmlXCellObject.prototype.attachOProductCard=function(t){function n(e){var t=o.nom=$p.cat.Номенклатура.get(e,!1);o.main.requery_short(t),t.is_new()?t.load().then(o.main.requery_long).catch($p.record_log):o.main.requery_long(t)}function r(e){function t(e){r.innerHTML=o.title.innerHTML=e.НаименованиеПолное||e.name}var n=e.querySelector(".product_img"),r=e.querySelector("[name=order_title]"),i=e.querySelector("[name=order_price]"),s=e.querySelector("[name=order_brand]"),u=new dhtmlXCarousel({parent:e.querySelector(".product_carousel"),offset_left:0,offset_top:0,offset_item:0,touch_scroll:!0});this.requery_short=function(e){t(e),i.innerHTML=dhtmlXDataView.prototype.types.list.price(e),n.src="templates/product_pics/"+e.ФайлКартинки.ref+".png",e.Файлы||(u.base.style.display="none",n.style.display=""),o.notes.model=e.МаркетИд},this.requery_long=function(e){var r=JSON.parse(e.Файлы);if(r.length){var i=[];u.forEachCell(function(e){i.push(e.getId())}),i.forEach(function(e){u.cells(e).remove()}),n.style.display="none",u.base.style.display="",r.forEach(function(e){i=u.addCell(),u.cells(i).attachHTMLString('<img class="aligncenter" style="height: 100%" src="templates/product_pics/'+e.ref+"."+e.ext+'" >')})}else u.base.style.display="none",n.style.display="";t(e),e.Марка!=$p.blank.guid?s.innerHTML="Марка (бренд): "+e.Марка.presentation:e.Производитель!=$p.blank.guid&&(s.innerHTML="Производитель: "+e.Производитель.presentation),e.ФайлОписанияДляСайта.empty()?o.description.style.display="none":(o.description.style.display="",$p.ajax.get("templates/product_descriptions/"+e.ФайлОписанияДляСайта.ref+".html").then(function(e){o.description.innerHTML=e.response}).catch(function(t){$p.record_log(e.ФайлОписанияДляСайта.ref)})),o.head_layout||(o.head_layout=new dhtmlXLayoutObject({parent:o.properties,pattern:"1C",offsets:{top:8,right:0,bottom:0,left:0},cells:[{id:"a",text:"Свойства и категории",header:!1}]})),o.head_fields&&o.head_layout.cells("a").detachObject(!0),o.head_fields=o.head_layout.cells("a").attachHeadFields({obj:e}),o.head_fields.setEditable(!1),o.notes.model=e.МаркетИд},dhx4.attachEvent("layout_resize",function(e){})}t||(t={}),this.attachHTMLString(e("product_card")),baron({root:".wdg_product_accordion",scroller:".scroller",bar:".scroller__bar",barOnCls:"baron",$:$,event:function(e,t,n,r){r=="trigger"&&(r="fire"),bean[r||"on"](e,t,n)}}).fix({elements:".header__title",outside:"header__title_state_fixed",before:"header__title_position_top",after:"header__title_position_bottom",clickable:!0}).pull({block:".load",elements:[{self:".load__value",property:"width"}],limit:115,onExpand:function(){$(".load").css("background","grey")}});var i=this.cell,o={container:i.querySelector(".wdg_product_accordion"),header:i.querySelector("[name=header]"),title:i.querySelector("[name=title]"),path:i.querySelector("[name=path]"),main:new r(i.querySelector("[name=main]")),description:i.querySelector("[name=description]"),properties:i.querySelector("[name=properties]"),notes:new s(i.querySelector("[name=notes]")),download:i.querySelector("[name=download]"),head_layout:null,head_fields:null},u=new $p.iface.OTooolBar({wrapper:o.header,width:"28px",height:"29px",top:"0px",right:"20px",name:"back",image_path:dhtmlx.image_path+"dhxsidebar"+dhtmlx.skin_suffix(),class_name:"",buttons:[{name:"back",text:'<i class="fa fa-long-arrow-left fa-lg" style="vertical-align: 15%;"></i>',title:"Вернуться к списку","float":"right"}],onclick:function(e){switch(e){case"back":var t=$p.job_prm.parse_url();$p.iface.set_hash(t.obj,"",t.frm,t.view),$p.iface.popup&&$p.iface.popup.hide()}}}),a=new $p.iface.CatalogPath(o.path,function(e){var t=$p.job_prm.parse_url();return $p.iface.set_hash(this.ref,"",t.frm,t.view),$p.cancel_bubble(e)});return $p.eve.hash_route.push(function(e){e.view=="catalog"&&$p.is_guid(e.ref)&&!$p.is_empty_guid(e.ref)&&n(e.ref)}),t.ref&&(n(t.ref),delete t.ref),o},dhtmlXCellObject.prototype.attachOProductsView=function(t){t||(t={});var n=this.cell,r=document.createElement("div"),i,s;return this.attachObject(r),function(){var e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("input"),s=document.createElement("i");e.className="md_column320",r.appendChild(e),$p.device_type!="desktop"&&(e.style.padding="4px 8px"),i=new $p.iface.CatalogPath(e),t.className="search",e.appendChild(t),t.appendChild(n),t.appendChild(s),s.className="icon_search fa fa-search",n.className="search",n.type="search",n.placeholder="Введите артикул или текст",n.title="Найти товар по части наименования, кода или артикула",n.onchange=function(e){dhx4.callEvent("search_text_change",[this.value]),this.blur()}}(),function(){var e=document.createElement("div"),t=document.createElement("div"),n=['по возрастанию цены <i class="fa fa-sort-amount-asc fa-fw"></i>','по убыванию цены <i class="fa fa-sort-amount-desc fa-fw"></i>','по наименованию <i class="fa fa-sort-alpha-asc fa-fw"></i>','по наименованию <i class="fa fa-sort-alpha-desc fa-fw"></i>','по популярности <i class="fa fa-sort-numeric-asc fa-fw"></i>','по популярности <i class="fa fa-sort-numeric-desc fa-fw"></i>'];e.className="md_column320",r.appendChild(e),e.appendChild(t),$p.iface.ODropdownList({container:t,title:"Сортировать:"+($p.device_type=="desktop"?"<br />":" "),values:n,class_name:"catalog_path",event_name:"sort_change"}),dhx4.attachEvent("sort_change",function(e){$p.record_log(e)})}(),function(){var t=document.createElement("div"),i=document.createElement("div"),o=document.createElement("div");e("templates")(),r.appendChild(o),o.appendChild(i),t.classList.add("wb-tools"),o.style.clear="both",o.style.height=i.style.height=n.offsetHeight+"px",o.style.width=i.style.width=n.offsetWidth+"px",s=dhtmlXCellObject.prototype.attachDynDataView({rest_name:"Module_ИнтеграцияСИнтернетМагазином/СписокНоменклатуры/",class_name:"cat.Номенклатура"},{container:i,outer_container:o,type:"list",custom_css:!0,autowidth:1,pager:{container:t,size:30,template:"{common.prev()}<div class='paging_text'> Страница {common.page()} из #limit#</div>{common.next()}"},fields:["ref","name"],selection:{}}),o.appendChild(t),s.attachEvent("onAfterSelect",function(e){}),s.attachEvent("onItemDblClick",function(e,t,n){var r=$p.job_prm.parse_url(),i={}._mixin(s.get(e));return i.ref=i.id,i.id=i.Код,i.name=i.Наименование,i._not_set_loaded=!0,delete i.Код,delete i.Наименование,$p.cat.Номенклатура.create(i).then(function(t){$p.iface.set_hash(r.obj,e,r.frm,r.view)}),!1}),dhx4.attachEvent("layout_resize",function(e){$p.record_log("")})}(),s},$p.iface.CatalogPath=function(e,t){function n(e){if(r!=e.obj){r=e.obj;var n,s=$p.cat.ВидыНоменклатуры.path(r);while(n=i.lastChild)i.removeChild(n);var o=document.createElement("span");s.length&&s[0].presentation?o.innerHTML='<i class="fa fa-folder-open-o"></i> ':o.innerHTML='<i class="fa fa-folder-open-o"></i> Поиск во всех разделах каталога',i.appendChild(o);while(n=s.pop())i.children.length>1&&(o=document.createElement("span"),o.innerHTML=" / ",i.appendChild(o)),o=document.createElement("a"),o.innerHTML=n.presentation,o.ref=n.ref,o.href="#",o.onclick=t||function(e){var t=$p.job_prm.parse_url();return t.obj!=this.ref&&$p.iface.set_hash(this.ref,"",t.frm,t.view),$p.cancel_bubble(e)},i.appendChild(o)}}var r=undefined,i=document.createElement("div");i.className="catalog_path",e.appendChild(i),$p.eve.hash_route.push(n),setTimeout(function(){n($p.job_prm.parse_url())},50)},$p.settings=function(e,t){e.rest=!0,e.irest_enabled=!0,e.local_storage_prefix="webshop_",e.rest_path="/a/ut11/%1/odata/standard.odata/",e.ws_url="ws://localhost:8001",e.zone=0,e.data_url="data/",e.create_tables="data/create_tables.sql",e.settings_url="settings.html",e.allow_post_message="*",e.use_google_geo=!0,e.request_full_screen=!0,e.guest_name="АлхимовАА",e.guest_pwd="",e.additional_css=["templates/webshop.css","templates/webshop_ie_only.css"],e.skin="dhx_terrace",$p.eve.redirect=!0},$p.iface.oninit=function(){function t(){var t,n,r=[{id:"catalog",text:"Каталог",icon:"search_48.png"},{id:"compare",text:"Сравнение",icon:"compare_48.png"},{id:"cart",text:"Корзина",icon:"shop_cart_48.png"},{id:"orders",text:"Заказы",icon:"projects_48.png"},{id:"content",text:"Контент",icon:"content_48.png"},{id:"user",text:"Профиль",icon:"contacts_48.png"},{id:"settings",text:"Настройки",icon:"settings_48.png"},{id:"about",text:"О программе",icon:"about_48.png"}];document.body.removeChild(document.querySelector("#webshop_splash")),e("templates")(),$p.device_type=="desktop"?($p.iface.main=new dhtmlXSideBar({parent:document.body,icons_path:dhtmlx.image_path+"dhxsidebar"+dhtmlx.skin_suffix(),width:110,template:"icons_text",items:r,offsets:{top:0,right:0,bottom:0,left:0}}),t=$p.iface.main.attachToolbar({icons_size:24,icons_path:dhtmlx.image_path+"dhxsidebar"+dhtmlx.skin_suffix(),items:[{type:"text",id:"title",text:"&nbsp;"},{type:"spacer"},{type:"text",id:"right",text:"[Город клиента и мантра магазина]"}]})):$p.iface.main=new dhtmlXSideBar({parent:document.body,icons_path:dhtmlx.image_path+"dhxsidebar"+dhtmlx.skin_suffix(),width:180,header:!0,template:"tiles",autohide:!0,items:r,offsets:{top:0,right:0,bottom:0,left:0}}),$p.iface.main.attachEvent("onSelect",function(e){$p.device_type=="desktop"&&t.setItemText("title",window.dhx4.template("<span style='font-weight: bold; font-size: 14px;'>#text#</span>",{text:this.cells(e).getText().text})),n=$p.job_prm.parse_url(),n.view!=e&&$p.iface.set_hash(n.obj,n.ref,n.frm,e),$p.iface["set_view_"+e]($p.iface.main.cells(e))}),n=$p.job_prm.parse_url(),!n.view||$p.iface.main.getAllItems().indexOf(n.view)==-1?$p.iface.set_hash(n.obj,n.ref,n.frm,$p.device_type=="desktop"?"content":"catalog"):setTimeout($p.iface.hash_route,10)}function n(e){if($p.iface.main&&$p.iface.main.getAttachedToolbar){var t=$p.iface.main.getAttachedToolbar();t&&(t.setItemText("right",'<i class="fa fa-map-marker"></i> '+(e.city||e.region).replace("г. ","")),t.objPull[t.idPrefix+"right"].obj.style.marginRight="8px")}}dhx4.attachEvent("geo_current_position",function(e){$p.iface.main&&$p.iface.main.getAttachedToolbar?n(e):setTimeout(function(){n(e)},3e3)}),$p.eve.auto_log_in().then(t).catch(function(e){console.log(e)}).then(function(e){$p.iface.sync&&$p.iface.sync.close()})},$p.eve.hash_route.push(function(e){return e.view&&$p.iface.main.getActiveItem()!=e.view&&$p.iface.main.getAllItems().forEach(function(t){t==e.view&&$p.iface.main.cells(t).setActive(!0)}),!1}),$p.iface.set_view_catalog=function(e){function t(){$p.iface._catalog.filter||($p.iface._catalog.filter=$p.iface._catalog.navigation.cells("filter").attachPropFilter($p.cat.ВидыНоменклатуры))}function n(e,t){$p.iface._catalog.product_card||($p.iface._catalog.product_card=e.attachOProductCard({rest_name:"Module_ИнтеграцияСИнтернетМагазином/СвойстваНоменклатуры",class_name:"cat.Номенклатура",ref:t})),e.setActive()}function r(e){$p.iface._catalog.dataview||($p.iface._catalog.dataview=e.attachOProductsView())}function i(e){function t(e){n&&(e.obj||(e.obj=$p.blank.guid),n.selectItem(e.obj,!1,!1))}var n=e.attachDynTree($p.cat.ВидыНоменклатуры,{},function(){$p.cat.ПредопределенныеЭлементы.by_name("ВидНоменклатуры_ПоказыватьВМагазине").Элементы.each(function(e){n.openItem(e.Элемент.ref)})});return n.attachEvent("onSelect",function(e){var t=$p.job_prm.parse_url();t.obj!=e&&$p.iface.set_hash(e,"",t.frm,t.view)}),$p.eve.hash_route.push(t),setTimeout(function(){t($p.job_prm.parse_url())},50),n}function s(){$p.iface._catalog={},$p.device_type=="desktop"?($p.iface._catalog.layout=e.attachLayout({pattern:"2U",cells:[{id:"a",text:"Каталог",width:300,header:!1},{id:"b",text:"Товары",header:!1}],offsets:{top:0,right:0,bottom:0,left:0}}),$p.iface._catalog.layout.attachEvent("onResizeFinish",function(){dhx4.callEvent("layout_resize",[this])}),$p.iface._catalog.layout.attachEvent("onPanelResizeFinish",function(){dhx4.callEvent("layout_resize",[this])}),$p.iface._catalog.navigation=$p.iface._catalog.layout.cells("a").attachTabbar({arrows_mode:"auto",tabs:[{id:"tree",text:'<i class="fa fa-sitemap"></i> Разделы',active:!0},{id:"filter",text:'<i class="fa fa-filter"></i> Фильтр'}]}),$p.iface._catalog.carousel=$p.iface._catalog.layout.cells("b").attachCarousel({keys:!1,touch_scroll:!1,offset_left:0,offset_top:0,offset_item:0}),setTimeout(function(){r($p.iface._catalog.carousel.cells("dataview"))})):($p.iface._catalog.navigation=e.attachTabbar({arrows_mode:"auto",tabs:[{id:"tree",text:'<i class="fa fa-sitemap"></i> Разделы',active:!0},{id:"filter",text:'<i class="fa fa-filter"></i> Фильтр'},{id:"goods",text:'<i class="fa fa-search"></i> Товары'}]}),$p.iface._catalog.carousel=$p.iface._catalog.navigation.cells("goods").attachCarousel({keys:!1,touch_scroll:!1,offset_left:0,offset_top:0,offset_item:0})),$p.iface._catalog.carousel.hideControls(),$p.iface._catalog.carousel.addCell("dataview"),$p.iface._catalog.carousel.addCell("goods"),$p.iface._catalog.navigation.attachEvent("onSelect",function(e){return e=="filter"?t():e=="goods"&&r($p.iface._catalog.carousel.cells("dataview")),!0}),$p.iface._catalog.tree=i($p.iface._catalog.navigation.cells("tree")),$p.eve.hash_route.push(function(e){e.view=="catalog"&&($p.is_guid(e.ref)&&!$p.is_empty_guid(e.ref)?n($p.iface._catalog.carousel.cells("goods"),e.ref):$p.iface._catalog.carousel.cells("dataview").setActive())})}$p.iface._catalog||s()},$p.iface.set_view_cart=function(t){if($p.iface._cart)return;$p.iface._cart={},t.attachHTMLString(e("cart")),t.cell.querySelector(".dhx_cell_cont_sidebar").style.overflow="auto"},$p.iface.set_view_compare=function(e){if($p.iface._compare)return;$p.iface._compare={grid:e.attachGrid()}},$p.iface.set_view_orders=function(e){if($p.iface._orders)return;$p.iface._orders={},e.attachHTMLString("<div>Нет заказов</div>")},$p.iface.set_view_settings=function(t){if($p.iface._settings)return;$p.iface._settings={},t.attachHTMLString(e("settings")),$p.iface._settings._cell=t.cell.querySelector(".dhx_cell_cont_sidebar"),$p.iface._settings._cell.style.overflow="auto",$p.iface._settings._form1=$p.iface._settings._cell.querySelector("[name=form1]"),$p.iface._settings._form2=$p.iface._settings._cell.querySelector("[name=form2]"),$p.iface._settings._form3=$p.iface._settings._cell.querySelector("[name=form3]"),$p.iface._settings.form1=new dhtmlXForm($p.iface._settings._form1.firstChild,[{type:"settings",labelWidth:80,position:"label-left"},{type:"label",labelWidth:320,label:"Тип устройства",className:"label_options"},{type:"block",name:"form_block_2",list:[{type:"settings",labelAlign:"left",position:"label-right"},{type:"radio",name:"device_type",labelWidth:120,label:'<i class="fa fa-desktop"></i> Компьютер',value:"desktop"},{type:"newcolumn"},{type:"radio",name:"device_type",labelWidth:150,label:'<i class="fa fa-mobile fa-lg"></i> Телефон, планшет',value:"phone"}]},{type:"template",label:"",value:"",note:{text:"Класс устройства определяется автоматически, но пользователь может задать его явно",width:320}},{type:"label",labelWidth:320,label:"Вариант оформления интерфейса",className:"label_options"},{type:"combo",inputWidth:220,name:"skin",label:"Скин",options:[{value:"dhx_web",text:"Web"},{value:"dhx_terrace",text:"Terrace"}]},{type:"template",label:"",value:"",note:{text:"Дополнительные свойства оформления можно задать в css",width:320}},{type:"label",labelWidth:320,label:"Адрес http сервиса 1С",className:"label_options"},{type:"input",inputWidth:220,name:"rest_path",label:"Путь",validate:"NotEmpty"},{type:"template",label:"",value:"",note:{text:"Можно указать как относительный, так и абсолютный URL публикации 1С OData. О настройке кроссдоменных запросов к 1С <a href='#'>см. здесь</a>",width:320}},{type:"label",labelWidth:320,label:"Значение разделителя публикации 1С fresh",className:"label_options"},{type:"input",inputWidth:220,name:"zone",label:"Зона",numberFormat:["0","",""],validate:"NotEmpty,ValidInteger"},{type:"template",label:"",value:"",note:{text:"Для неразделенной публикации, зона = 0",width:320}}]),$p.iface._settings.form2=new dhtmlXForm($p.iface._settings._form2.firstChild,[{type:"settings",labelWidth:80,position:"label-left"},{type:"label",labelWidth:320,label:"Доступные закладки",className:"label_options"},{type:"container",name:"views",inputWidth:320,inputHeight:320},{type:"template",label:"",value:"",note:{text:"Видимость и порядок закладок навигации",width:320}}]),$p.iface._settings.form3=new dhtmlXForm($p.iface._settings._form3.firstChild,[{type:"settings",labelWidth:80,position:"label-left"},{type:"button",name:"save",value:"Применить настройки",offsetTop:20}]),$p.iface._settings.form1.checkItem("device_type",$p.wsql.get_user_param("device_type")),["zone","skin","rest_path"].forEach(function(e){$p.iface._settings.form1.setItemValue(e,$p.wsql.get_user_param(e))}),$p.iface._settings.form1.attachEvent("onChange",function(e,t,n){$p.wsql.set_user_param(e,t)}),$p.iface._settings.form3.attachEvent("onButtonClick",function(e){location.reload()})},$p.iface.set_view_user=function(t){if($p.iface._user)return;$p.iface._user={},t.attachHTMLString(e("user")),t.cell.querySelector(".dhx_cell_cont_sidebar").style.overflow="auto"},$p.iface.set_view_content=function(t){if($p.iface._content)return;$p.iface._content={},t.attachHTMLString(e("content")),t.cell.querySelector(".dhx_cell_cont_sidebar").style.overflow="auto"},$p.iface.set_view_about=function(t){if($p.iface._about)return;$p.iface._about={},t.attachHTMLString(e("about")),t.cell.querySelector(".dhx_cell_cont_sidebar").style.overflow="auto"}},{templates:function(e,t,n){n.exports=function(){function t(e){return e.ФайлКартинки!=$p.blank.guid?"background-image:url(templates/product_pics/"+e.ФайлКартинки+".png);":""}function n(e){return e.Производитель!=$p.blank.guid?$p.cat.Производители.get(e.Производитель).presentation:""}function r(e){return(e.Цена_Мин==e.Цена_Макс?e.Цена_Мин.toFixed(0):"от "+e.Цена_Мин.toFixed(0)+" до "+e.Цена_Макс.toFixed(0))+' <i class="fa fa-rub" style="font-size: smaller; color: #505050"></i>'}dhtmlx.Type.add(dhtmlXDataView,{name:"list",template:e("dataview_list"),template_loading:"Загрузка данных...",height:100,width:900,margin:2,padding:0,border:1,image:t,manufacturer:n,price:r}),dhtmlx.Type.add(dhtmlXDataView,{name:"large",template:e("dataview_large"),height:210,width:380,margin:2,padding:2,border:1,image:t,manufacturer:n,price:r}),dhtmlx.Type.add(dhtmlXDataView,{name:"small",template:e("dataview_small"),height:180,width:220,margin:2,padding:2,border:1,image:t,manufacturer:n,price:r})}},about:'<div class="md_column1300">\r\n    <h1><i class="fa fa-info-circle"></i> Интернет-магазин MetaStore</h1>\r\n    <p>Метамагазин - это веб-приложение с открытым исходным кодом, разработанное компанией <a href="http://www.oknosoft.ru/" target="_blank">Окнософт</a> на базе фреймворка <a href="http://www.oknosoft.ru/metadata/" target="_blank">Metadata.js</a> и распространяемое под <a href="http://www.oknosoft.ru/programmi-oknosoft/metadata.html" target="_blank">коммерческой лицензией Окнософт</a>.<br />\r\n        Исходный код и документация доступны на <a href="https://github.com/oknosoft/metastore" target="_blank">GitHub <i class="fa fa-github-alt"></i></a>.<br />\r\n        Приложение является веб-интерфейсом к типовым конфигурациям 1С (Управление торговлей 11.2, Комплексная автоматизация 2.0, ERP Управление предприятием 2.1) и реализует функциональность интернет-магазина для информационной базы 1С\r\n    </p>\r\n    <p>Использованы следующие библиотеки и инструменты:</p>\r\n\r\n    <h3>Серверная часть</h3>\r\n    <ul>\r\n        <li><a href="http://1c-dn.com/1c_enterprise/" target="_blank">1c_enterprise</a><span class="md_muted_color">, ORM сервер 1С:Предприятие</span></li>\r\n        <li><a href="http://www.postgresql.org/" target="_blank">postgreSQL</a><span class="md_muted_color">, мощная объектно-раляционная база данных</span></li>\r\n        <li><a href="https://nodejs.org/" target="_blank">node.js</a><span class="md_muted_color">, серверная программная платформа, основанная на движке V8 javascript</span></li>\r\n        <li><a href="http://nginx.org/ru/" target="_blank">nginx</a><span class="md_muted_color">, высокопроизводительный HTTP-сервер</span></li>\r\n    </ul>\r\n\r\n    <h3>Управление данными в памяти браузера</h3>\r\n    <ul>\r\n        <li><a href="https://github.com/agershun/alasql" target="_blank">alaSQL</a><span class="md_muted_color">, база данных SQL для браузера и Node.js с поддержкой как традиционных реляционных таблиц, так и вложенных JSON данных (NoSQL)</span></li>\r\n        <li><a href="https://github.com/metatribal/xmlToJSON" target="_blank">xmlToJSON</a><span class="md_muted_color">, компактный javascript модуль для преобразования XML в JSON</span></li>\r\n        <li><a href="https://github.com/SheetJS/js-xlsx" target="_blank">xlsx</a><span class="md_muted_color">, библиотека для чтения и записи XLSX / XLSM / XLSB / XLS / ODS в браузере</span></li>\r\n    </ul>\r\n\r\n    <h3>UI библиотеки и компоненты интерфейса</h3>\r\n    <ul>\r\n        <li><a href="http://dhtmlx.com/" target="_blank">dhtmlx</a><span class="md_muted_color">, кроссбраузерная библиотека javascript для построения современных веб и мобильных приложений</span></li>\r\n        <li><a href="https://github.com/leongersen/noUiSlider" target="_blank">noUiSlider</a><span class="md_muted_color">, легковесный javascript компонент регулирования пары (min-max) значений </span></li>\r\n        <li><a href="https://github.com/eligrey/FileSaver.js" target="_blank">filesaver.js</a><span class="md_muted_color">, HTML5 реализация метода saveAs</span></li>\r\n    </ul>\r\n\r\n    <h3>Графика</h3>\r\n    <ul>\r\n        <li><a href="https://fortawesome.github.io/Font-Awesome/" target="_blank">fontawesome</a><span class="md_muted_color">, набор иконок и стилей CSS</span></li>\r\n        <li><a href="http://fontastic.me/" target="_blank">fontastic</a><span class="md_muted_color">, еще один набор иконок и стилей</span></li>\r\n    </ul>\r\n\r\n    <p>&nbsp;</p>\r\n    <h2><i class="fa fa-question-circle"></i> Вопросы</h2>\r\n    <p>Если обнаружили ошибку, пожалуйста,\r\n        <a href="https://github.com/oknosoft/metastore/issues/new" target="_blank">зарегистрируйте вопрос в GitHub</a> или\r\n        <a href="http://www.oknosoft.ru/metadata/#page-118" target="_blank">свяжитесь с разработчиком</a> напрямую<br />&nbsp;</p>\r\n\r\n</div>',cart:'<div class="md_column1300">\r\n    <h1><i class="fa fa-shopping-cart"></i> Корзина</h1>\r\n    <p>\r\n        Корзина пуста\r\n    </p>\r\n</div>',content:'<div class="md_column1300">\r\n    <h1><i class="fa fa-opencart"></i> Интернет-магазин MetaStore</h1>\r\n\r\n    <div class="md_column300">\r\n        <p class="text-center small-margin">\r\n            <!-- Start round icon -->\r\n            <a href="#" class="apex-icon-round">\r\n            <span class="apex-icon">\r\n                <i class="apex-icon-1c"></i>\r\n            </span>\r\n                <span class="apex-icon-title">Типовая 1С</span>\r\n            </a>\r\n            <!-- End round icon -->\r\n            MetaStore - это веб-интерфейс<br />\r\n            к типовым конфигурациям 1С, реализующий функциональность интернет-магазина\r\n        </p>\r\n    </div>\r\n\r\n    <div class="md_column300">\r\n        <p class="text-center small-margin">\r\n            <!-- Start round icon -->\r\n            <a href="#" class="apex-icon-round">\r\n            <span class="apex-icon">\r\n                <i class="apex-icon-connect"></i>\r\n            </span>\r\n                <span class="apex-icon-title">Готовое решение</span>\r\n            </a>\r\n            <!-- End round icon -->\r\n            Подключается в один клик:<br />\r\n            1С:Управление торговлей,<br />\r\n            1С:Комплексная автоматизация,<br />\r\n            1С:ERP Управление предприятием\r\n        </p>\r\n    </div>\r\n\r\n    <div class="md_column300">\r\n        <p class="text-center small-margin">\r\n            <!-- Start round icon -->\r\n            <a href="#" class="apex-icon-round">\r\n            <span class="apex-icon">\r\n                <i class="apex-icon-equilizer"></i>\r\n            </span>\r\n                <span class="apex-icon-title">Простота настроек</span>\r\n            </a>\r\n            <!-- End round icon -->\r\n            Иерархия, свойства номенклатуры,<br />остатки и цены, настраиваются<br />в привычных формах 1С\r\n        </p>\r\n    </div>\r\n\r\n    <div class="md_column300">\r\n        <p class="text-center small-margin">\r\n            <!-- Start round icon -->\r\n            <a href="#" class="apex-icon-round">\r\n            <span class="apex-icon">\r\n                <i class="fa fa-github-alt" style="line-height: 78px;"></i>\r\n            </span>\r\n                <span class="apex-icon-title">Открытый код</span>\r\n            </a>\r\n            <!-- End round icon -->\r\n            Разработано на базе <a href="http://www.oknosoft.ru/metadata/" target="_blank">Metadata.js</a><br />\r\n            Исходный код и документация<br />доступны на <a href="https://github.com/oknosoft/metastore" target="_blank">GitHub <i class="fa fa-github-alt"></i></a>\r\n            <br />&nbsp;\r\n        </p>\r\n    </div>\r\n\r\n    <div style="padding: 24px 0 24px 0; background-color: #f5f5f5; clear: both; display: inline-block">\r\n\r\n        <div class="md_column320">\r\n            <p>\r\n                <img class="aligncenter" src="templates/imgs/phone-2.png" alt="phone" width="332" height="409">\r\n            </p>\r\n        </div>\r\n\r\n        <div class="md_column320">\r\n            <h2 class="light">Поддержка мобильных устройств</h2>\r\n            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>\r\n            <p><a href="#" class="btn">Learn More</a></p>\r\n        </div>\r\n\r\n    </div>\r\n\r\n</div>',dataview_large:"<div>\r\n    <div class='dataview_large_image' style='{common.image()}'></div>\r\n    <div class='dataview_price'>{common.price()}</div>\r\n    <div style='clear: right'>\r\n        <div>{obj.Наименование}</div>\r\n        <div>{common.manufacturer()}</div>\r\n        <div >{obj.Описание}</div>\r\n    </div>\r\n</div>\r\n\r\n",dataview_list:"<div>\r\n    <div class='dataview_list_image' style='{common.image()}'></div>\r\n    <div class='dataview_price'>{common.price()}</div>\r\n    <div>\r\n        <div>{obj.Наименование}</div>\r\n        <div>{common.manufacturer()}</div>\r\n        <div >{obj.Описание}</div>\r\n    </div>\r\n</div>\r\n",dataview_small:"<div>\r\n    <div class='dataview_small_image' style='{common.image()}'></div>\r\n    <div class='dataview_price'>{common.price()}</div>\r\n</div>\r\n<div style='clear: both; text-align: center;'>{obj.Наименование}</div>\r\n",product_card:'<div class="clipper wdg_product_accordion">\r\n    <div class="scroller">\r\n        <div class="container">\r\n\r\n            <div class="header">\r\n                <div class="header__title" name="header">\r\n                    <span name="title">Товар</span>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            <div name="path" style="padding: 8px">\r\n\r\n            </div>\r\n\r\n            <!-- РАЗДЕЛ 1 - картинка и кнопки покупки -->\r\n            <div name="main">\r\n                <div class="md_column320" style="min-height: 350px;">\r\n                    <img class="product_img aligncenter" src="">\r\n                    <div class="product_carousel aligncenter"></div>\r\n                </div>\r\n                <div class="md_column320" name="order" style="padding-top: 0;">\r\n                    <div>\r\n                        <h3 name="order_title"></h3>\r\n                        <p name="order_price" style="margin: 8px 0 0 0; font-size: 2em;">1300 <i class="fa fa-rub" style="font-size: smaller"></i></p>\r\n                        <div class="rating" data-rating="0"><div class="fill-rating"></div></div>\r\n                        <p style="margin: 0">Этот товар еще никто не оценил.</p>\r\n                        <a href="#" class="dropdown_list" style="display: inline-block;" title="Наличие в магазинах">Можно забрать сегодня</a>\r\n                        <p name="order_warranty" style="margin: 8px 0 0 0">Гарантия: 12 мес.</p>\r\n                        <p name="order_brand" style="margin: 8px 0 0 0"></p>\r\n\r\n                        <button name="order_cart" class="md_btn btn-red btn-fluid"><i class="fa fa-cart-plus fa-fw"></i> Добавить в корзину</button>\r\n                        <button name="order_compare" class="md_btn btn-grey btn-fluid"><i class="fa fa-bar-chart fa-fw"></i> К сравнению</button>\r\n\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- РАЗДЕЛ 2 - описание и реквизиты -->\r\n            <div class="header">\r\n                <div class="header__title header__title_state_fixed header__title_position_bottom">Описание и характеристики</div>\r\n            </div>\r\n            <div>\r\n                <!-- Здесь описание товара -->\r\n                <div class="md_column320" name="description">\r\n\r\n                </div>\r\n                <!-- Здесь OHeadFields товара -->\r\n                <div class="md_column320" name="properties" style="min-height: 300px;">\r\n\r\n                </div>\r\n            </div>\r\n\r\n\r\n            <!-- РАЗДЕЛ 3 - отзывы с Маркета -->\r\n            <div class="header">\r\n                <div class="header__title header__title_state_fixed">Отзывы, вопрос-ответ</div>\r\n            </div>\r\n            <div name="notes">\r\n                <p class="text">Пока нет ни одного комментария, ваш будет первым</p>\r\n            </div>\r\n\r\n\r\n            <div class="header">\r\n                <div class="header__title header__title_state_fixed">Драйверы и файлы</div>\r\n            </div>\r\n            <div name="download">\r\n                <p class="text">Для данного товара файлы и драйверы не требуются</p>\r\n            </div>\r\n\r\n            <div class="load" style="height: 0px;">\r\n                <div class="load__value" style="width: 0%;"></div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n\r\n    <div class="scroller__track">\r\n        <div class="scroller__bar" style="height: 26px; top: 0px;"></div>\r\n    </div>\r\n\r\n</div>',review:'<div class="product-review-item product-review-item_collapsed_yes js-review">\r\n    <div class="product-review-user i-bem" onclick="return {\'product-review-user\':\'\'}">\r\n        <a class="link product-review-user__name" href="/user/m2gtr/reviews" itemprop="author">Алексеев Алексей</a>\r\n        <a class="link product-review-user__reviews" href="/user/m2gtr/reviews">Автор 3&nbsp;отзывов</a>\r\n    </div>\r\n    <div class="product-review-item__stat">\r\n        <div class="rating rating_border_yes hint i-bem hint_js_inited" date-rate="4"\r\n             onclick="return {&quot;hint&quot;:{&quot;content&quot;:&quot;Оценка&nbsp;пользователя&nbsp;4&nbsp;из&nbsp;5&quot;,&quot;offset&quot;:&quot;15&quot;}}"\r\n             itemprop="reviewRating" itemscope="" itemtype="http://schema.org/Rating">\r\n            <meta itemprop="ratingValue" content="4">\r\n            4\r\n            <div class="rating__corner">\r\n                <div class="rating__triangle"></div>\r\n            </div>\r\n        </div>\r\n        <span class="product-review-item__rating-label">хорошая модель</span><span\r\n            class="product-review-item__delivery">Опыт использования:&nbsp;менее месяца</span></div>\r\n\r\n    <dl class="product-review-item__stat">\r\n        <dt class="product-review-item__title">Достоинства:</dt>\r\n        <dd class="product-review-item__text">Вместительный, 2 компрессора, полка для бутылок экономит место.</dd>\r\n    </dl>\r\n    <dl class="product-review-item__stat">\r\n        <dt class="product-review-item__title">Недостатки:</dt>\r\n        <dd class="product-review-item__text">Работа МК сопровождается очень сильным журчанием... хотя может быть мне\r\n            попался бракованный экземпляр\r\n        </dd>\r\n    </dl>\r\n    <div class="product-review-item__stat  product-review-item__stat_type_inline">\r\n        <div class="product-review-item__title">Комментарий:</div>\r\n        <div class="product-review-item__text">В целом холодильник хороший, как и писал вместительный и компактный,\r\n            очень выигрывает по ценовой политике.<br>объективно: качество пластика перевесных полочек на двери могло бы\r\n            быть и лучше, создается впечателение что они очень хрупкие и вот вот сломаются... но по факту ещё не одну не\r\n            сломал))<br>читал много отзывов и довольно много людей жалаются на противный сигнал при открытии двери\r\n            каждый раз, так вот сигнал этот отключается при отключении режима заморозка, да и этот сигнал довольно\r\n            тихий, как и сигнал при открытии двери ХК более 1 мин<br>По уровню шуму к ХК нареканий никаких нет,\r\n            компрессоры оба тихие, но вот к циркуляции хладогента в МК претензии есть,<br>при работе слышен звук на\r\n            подобие бульканя воды в батареях, он вроде и не громкий но жутко раздражает, обратился в сервис сказали что\r\n            бульканье это нормальное явления и не захотели приезжать...<br>так что совет проверяйте холодильник на\r\n            уровень шума прямов магазине\r\n        </div>\r\n    </div>\r\n    <div class="product-review-item__footer layout layout_display_table">\r\n        <div class="layout__col">12 мая\r\n            <meta itemprop="datePublished" content="2015-05-12T17:55:02">\r\n            ,&nbsp;Санкт-Петербург\r\n        </div>\r\n        <div class="layout__col layout__col_align_right">\r\n            <div class="review-voting review-voting_active_yes manotice manotice_type_popup i-bem review-voting_js_inited manotice_js_inited"\r\n                 onclick="return {&quot;review-voting&quot;:{&quot;sk&quot;:&quot;ua2238057ac558861fac690d2527fa046&quot;},&quot;manotice&quot;:{&quot;directions&quot;:&quot;right&quot;,&quot;autoclosable&quot;:&quot;yes&quot;}}">\r\n                <div class="review-voting__plus"><img alt="" src="//yastatic.net/lego/_/La6qi18Z8LwgnZdsAr1qy1GwCwo.gif"\r\n                                                      class="image image_name_voting-plus"><span\r\n                        class="review-voting__num">0</span></div>\r\n                <div class="review-voting__minus"><img alt=""\r\n                                                       src="//yastatic.net/lego/_/La6qi18Z8LwgnZdsAr1qy1GwCwo.gif"\r\n                                                       class="image image_name_voting-minus"><span\r\n                        class="review-voting__num">0</span></div>\r\n                <div class="spin spin_theme_gray-16 i-bem spin_js_inited" onclick="return {\'spin\':{}}"><img alt=""\r\n                                                                                                            src="//yastatic.net/lego/_/La6qi18Z8LwgnZdsAr1qy1GwCwo.gif"\r\n                                                                                                            class="image spin__icon">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',settings:'<div class="md_column1300">\r\n    <h1><i class="fa fa-cogs"></i> Настройки</h1>\r\n    <p>В промышленном режиме данная страница выключена.<br />\r\n        Внешний вид сайта и параметры подключения, настраиваются в конфигурационном файле.<br />\r\n        В демо-ражиме страница настроек иллюстрирует использование параметров работы программы клиентской частью приложения.</p>\r\n\r\n    <div class="md_column320" name="form1" style="max-width: 420px;"><div></div></div>\r\n    <div class="md_column320" name="form2"><div></div></div>\r\n    <div class="md_column320" name="form3"><div></div></div>\r\n</div>',user:'<div class="md_column1300">\r\n    <h1><i class="fa fa-user"></i> Профиль пользователя</h1>\r\n    <p>\r\n        Пользователь не авторизован\r\n    </p>\r\n</div>'},{},{})